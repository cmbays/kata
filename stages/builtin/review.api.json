{
  "type": "review",
  "flavor": "api",
  "description": "Review stage specialized for API design and implementation. Evaluate endpoint contracts, authentication, input validation, error responses, and OpenAPI/schema completeness.",
  "entryGate": {
    "type": "entry",
    "conditions": [
      {
        "type": "artifact-exists",
        "description": "Build output must exist before API review",
        "artifactName": "build-output"
      }
    ],
    "required": true
  },
  "exitGate": {
    "type": "exit",
    "conditions": [
      {
        "type": "artifact-exists",
        "description": "API review document must be produced",
        "artifactName": "api-review"
      }
    ],
    "required": true
  },
  "artifacts": [
    {
      "name": "api-review",
      "description": "Structured API review covering endpoint contracts, auth, validation, error handling, and schema completeness",
      "required": true,
      "extension": ".md",
      "path": ".kata/artifacts/review-api.md"
    }
  ],
  "promptTemplate": "../prompts/review.api.md",
  "learningHooks": [
    "api-design-quality",
    "contract-completeness",
    "auth-patterns"
  ],
  "config": {},
  "resources": {
    "tools": [],
    "agents": [
      {
        "name": "everything-claude-code:security-reviewer",
        "when": "when reviewing authentication or user input handling"
      }
    ],
    "skills": [
      {
        "name": "pr-review-toolkit:type-design-analyzer",
        "when": "when evaluating request/response type design"
      }
    ]
  }
}
